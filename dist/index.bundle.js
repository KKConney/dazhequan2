webpackJsonp([0,1],[function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={};i.addevent=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n},i.removeevent=function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null},i.ajax=function(e,t,n,i){var o=new XMLHttpRequest;o.onreadystatechange=function(){4===o.readyState&&(o.status>=200&&o.status<300||304===o.status?i(o.responseText):alert("ajax通信失败 "+o.status))},o.onerror=function(){console.log("error")},o.open(n,t,!0),"post"===n?(o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.send(e)):"get"===n&&o.send()},i.testlogin=function(){return!("true"!==localStorage.sign_in||!localStorage.username)},i.throttling1=function(e,t){var n=!1;return function(){var i=this,o=arguments;n||(e.apply(i,o),n=!0,setTimeout(function(){n=!1},t))}},i.throttling2=function(e,t){var n,i=!1;return function(){var o=this,a=arguments;i?(clearTimeout(n),n=setTimeout(function(){e.apply(o,a),i=!1},500)):(e.apply(o,a),i=!0,setTimeout(function(){i=!1},t))}},i.debounce=function(e,t){var n;return function(){var i=arguments;clearTimeout(n),n=setTimeout(function(){e.apply(this,i)},t)}},i.fadeIn=function(e,t){var n=1/(t/50);e.style.opacity||(e.style.opacity=1);var i=setInterval(function(e,t){e.style.opacity<0?clearInterval(i):e.style.opacity-=t}.bind(null,e,n),50)},i.htmlEncode=function(e){var t=document.createElement("div");return t.appendChild(document.createTextNode(e)),t.innerHTML},i.htmlDecode=function(e){var t=document.createElement("div");return t.innerHTML=e,t.innerHTML},i.html_encode=function(e){var t="";return 0==e.length?"":(t=e.replace(/&/g,"&gt;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t=t.replace(/ /g,"&nbsp;"),t=t.replace(/\'/g,"&#39;"),t=t.replace(/\"/g,"&quot;"),t=t.replace(/\n/g,"<br>"))},i.html_decode=function(e){var t="";return 0==e.length?"":(t=e.replace(/&gt;/g,"&"),t=t.replace(/&lt;/g,"<"),t=t.replace(/&gt;/g,">"),t=t.replace(/&nbsp;/g," "),t=t.replace(/&#39;/g,"'"),t=t.replace(/&quot;/g,'"'),t=t.replace(/<br>/g,"\n"))},i.upload=function(e,t,n){e.on("click",function(){return $("#js-file").off("change").on("change",function(e){var t=e.target.files[0];return cos.uploadFile(successCallBack,errorCallBack,progressCallBack,bucket,myFolder+t.name,t,1),$("#form")[0].reset(),!1}),setTimeout(function(){$("#js-file").click()},0),!1})},t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={};i.daojishi=function(e,t,n){if(e){var i=3;e.innerHTML=t+(i-1)+n;var o=setInterval(function(){i--,1===i&&(clearInterval(o),location.hash="#/"),e.innerHTML=t+(i-1)+n},1e3)}},i.load=function(e,t,n){this.parent=e,this.loading=t||"正在玩命加载中",this.fangxiang=n||"top",this.button=document.createElement("button");var i="am-btn am-btn-primary progress";"bottom"===this.fangxiang?i+=" bottom":"top"===this.fangxiang&&(i+=" top"),this.button.setAttribute("class",i),this.button.innerHTML='<i class="am-icon-spinner am-icon-spin"></i>\n                      '+this.loading+"\n                      "},i.load.prototype.mount=function(){this.parent instanceof HTMLElement&&this.parent.appendChild(this.button)},i.load.prototype.fadeIn=function(){if(this.button){this.button.style.opacity=0;var e=this;setTimeout(function(){e.button.parentNode===e.parent&&e.parent.removeChild(e.button)},1e3)}},i.uploadFile=function(e,t){e.addEventListener("change",function(e){var n=e.target.files,i=[].map.call(n,function(e,t){return new Promise(function(t,n){var i=new FileReader;/image/.test(e.type)?(i.readAsDataURL(e),i.onerror=function(){console.log("上传失败，错误码为:"+i.error.code),n(i.error.code)},i.onload=function(e){t(i.result)}):(n("err"),alert("请选择图片文件！"))})});Promise.all(i).then(function(e){t(e)}).catch(function(e){t(e)})})},i.tecentcloud=function(e,t,n,i,o,a){var r=[].map.call(n,function(n,i){return new Promise(function(i,r){e.uploadFile(function(e){var t=e.data.source_url.split("/");console.log(t[t.length-1]),i(t[t.length-1])},o,a,t,n.name,n,1)})});Promise.all(r).then(function(e){console.log(e),i(e)}).catch(function(e){i(e)})},t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="http://dazhequan-1253553408.costj.myqcloud.com/";t.default="https://dazhequan.herokuapp.com/",t.tecentcloud=i},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},o=0;o<this.length;o++){var a=this[o][0];"number"==typeof a&&(i[a]=!0)}for(o=0;o<t.length;o++){var r=t[o];"number"==typeof r[0]&&i[r[0]]||(n&&!r[2]?r[2]=n:n&&(r[2]="("+r[2]+") and ("+n+")"),e.push(r))}},e}},function(e,t){function n(e,t){for(var n=0;n<e.length;n++){var i=e[n],o=f[i.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](i.parts[a]);for(;a<i.parts.length;a++)o.parts.push(s(i.parts[a],t))}else{for(var r=[],a=0;a<i.parts.length;a++)r.push(s(i.parts[a],t));f[i.id]={id:i.id,refs:1,parts:r}}}}function i(e){for(var t=[],n={},i=0;i<e.length;i++){var o=e[i],a=o[0],r=o[1],l=o[2],s=o[3],u={css:r,media:l,sourceMap:s};n[a]?n[a].parts.push(u):t.push(n[a]={id:a,parts:[u]})}return t}function o(e,t){var n=g(),i=b[b.length-1];if("top"===e.insertAt)i?i.nextSibling?n.insertBefore(t,i.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),b.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function a(e){e.parentNode.removeChild(e);var t=b.indexOf(e);t>=0&&b.splice(t,1)}function r(e){var t=document.createElement("style");return t.type="text/css",o(e,t),t}function l(e){var t=document.createElement("link");return t.rel="stylesheet",o(e,t),t}function s(e,t){var n,i,o;if(t.singleton){var s=v++;n=h||(h=r(t)),i=u.bind(null,n,s,!1),o=u.bind(null,n,s,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=l(t),i=d.bind(null,n),o=function(){a(n),n.href&&URL.revokeObjectURL(n.href)}):(n=r(t),i=c.bind(null,n),o=function(){a(n)});return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else o()}}function u(e,t,n,i){var o=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=y(t,o);else{var a=document.createTextNode(o),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(a,r[t]):e.appendChild(a)}}function c(e,t){var n=t.css,i=t.media;if(i&&e.setAttribute("media",i),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function d(e,t){var n=t.css,i=t.sourceMap;i&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var o=new Blob([n],{type:"text/css"}),a=e.href;e.href=URL.createObjectURL(o),a&&URL.revokeObjectURL(a)}var f={},p=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},m=p(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),g=p(function(){return document.head||document.getElementsByTagName("head")[0]}),h=null,v=0,b=[];e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");t=t||{},"undefined"==typeof t.singleton&&(t.singleton=m()),"undefined"==typeof t.insertAt&&(t.insertAt="bottom");var o=i(e);return n(o,t),function(e){for(var a=[],r=0;r<o.length;r++){var l=o[r],s=f[l.id];s.refs--,a.push(s)}if(e){var u=i(e);n(u,t)}for(var r=0;r<a.length;r++){var s=a[r];if(0===s.refs){for(var c=0;c<s.parts.length;c++)s.parts[c]();delete f[s.id]}}}};var y=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(16),a=i(o),r=n(10),l=i(r),s=n(11),u=i(s),c=n(15),d=i(c),f=n(9),p=i(f),m=n(12),g=i(m),h=n(13),v=i(h),b=n(17),y=i(b),w=n(7),x=i(w),M=new x.default,T=document.getElementById("page"),L=document.getElementById("menulist");M.route("/",p.default.bind(null,L,T)),M.route("/login",l.default.bind(null,L,T)),M.route("/logout",u.default.bind(null,L,T)),M.route("/post",d.default.bind(null,L,T)),M.route("/register",a.default.bind(null,L,T)),M.route("/nopage",g.default.bind(null,L,T));var E=/^\/paper\/([a-fA-F0-9]{24})$/,_=/^\/user\/(.*)$/;M.page=function(e){var t=this.currenturl.match(E)[1];(0,v.default)(L,T,e,t)},M.user=function(e){(0,y.default)(L,T,e)},M.refresh=function(){this.currenturl=location.hash.slice(1)||"/",this.methods[this.currenturl]?this.methods[this.currenturl]():E.test(this.currenturl)?this.page(f.paper_info):_.test(this.currenturl)?(console.log(this.currenturl.match(_)[1]),this.user(this.currenturl.match(_)[1])):(console.log(this.currenturl),this.methods["/nopage"]())},t.default=M},function(e,t,n){var i=n(18);"string"==typeof i&&(i=[[e.i,i,""]]);n(4)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=i(o),r=function(){this.currenturl="",this.methods={}};r.prototype.route=function(e,t){this.methods[e]=t},r.prototype.refresh=function(){this.currenturl=location.hash.slice(1)||"/",this.methods[this.currenturl]?this.methods[this.currenturl]():(console.log(this.currenturl),this.methods["/nopage"]())},r.prototype.init=function(){a.default.addevent(window,"load",this.refresh.bind(this)),a.default.addevent(window,"hashchange",this.refresh.bind(this))},t.default=r},function(e,t,n){"use strict";function i(e){if(void 0===e.pageY&&void 0!==e.touches){if(e.touches.length<=0)return!1;e.pageY=e.touches[e.touches.length-1].pageY}return e.pageY}function o(e){var t=document.body.scrollTop;return 0!==t?(p=!1,document.removeEventListener("mousemove",a),document.removeEventListener("touchmove",a,{passive:!1}),document.removeEventListener("mouseup",r),void document.removeEventListener("touchend",r)):(p=!0,document.addEventListener("mousemove",a),document.addEventListener("touchmove",a,{passive:!1}),document.addEventListener("mouseup",r),document.addEventListener("touchend",r),void(f&&(s=!0,u=!1,c=i(e))))}function a(e){if(f&&p&&s){e.stopImmediatePropagation();var t=Math.floor(i(e)-c);if(t>=0){e.preventDefault(),t>d?(u=!0,ptr.innerHTML="loading..."):(u=!1,ptr.innerHTML="...");var n=41-t;ptr.style.marginTop="-"+(n>0?n:0)+"px"}}}function r(){f&&p&&(u?(f=!1,ptr.style.marginTop="0px",l().then(function(e){console.log(e),f=!0,ptr.style.marginTop="-41px",ptr.innerHTML="..."})):ptr.style.marginTop="-41px",s=!1,u=!1)}Object.defineProperty(t,"__esModule",{value:!0}),n(22);var l,s=!1,u=!1,c=0,d=20,f=!0,p=!0,m=function(e){return this.content=document.getElementById(e.content),this.ptr=document.getElementById("ptr"),l=e.callback||function(){},this.start=function(){this.content.addEventListener("mousedown",o),this.content.addEventListener("touchstart",o)},this.remove=function(){this.content.removeEventListener("mousedown",o),this.content.removeEventListener("touchstart",o)},this};t.default=m},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(){var e=document.body.scrollTop+document.body.clientHeight,t=document.body.offsetHeight;T&&t-e<5*M&&(console.log("到达预加载阈值，开始预加载"),s())}function a(e){for(var t=0;e;)t+=e.offsetTop,e=e.offsetParent;return t}function r(){var e=document.body.scrollTop+document.body.clientHeight;L.forEach(function(t){if(!t.loaded&&t.height>document.body.scrollTop-100&&t.height<e){var n=document.querySelector("img[img-index='"+t.index+"']");n&&("/failed.jpg"!==t.src?n.src=g.tecentcloud+t.src:n.src="/failed.jpg",t.loaded=!0,n.onload=function(){n.style.opacity=1},n.onerror=function(){n.style.opacity=1,n.src="/failed.jpg"})}}),L=L.filter(function(e){return!e.loaded})}function l(){return s("reload")}function s(e){return new Promise(function(t,n){T=!1,e&&(x=0,L=[]),m.default.ajax(null,h.default,"post",function(n){var i=JSON.parse(n),o="";i.forEach(function(e){var t=e.like.indexOf(localStorage.username)===-1?"unlike":"like";o+="\n      <li class='info-item'>\n        <div class='info-img'>  <img class='img' img-index = "+x+" ></div>\n        <div class='info-mesg'>\n            <div class='row-1'>\n              <div class='item-title'><a href = '#/paper/"+e._id+"'>"+e.title+"</a></div>\n            </div>\n            <div class='row-2'>\n              <div class='item-heart'><i data-index='"+e._id+"' data-init ='"+t+"' class=\"am-icon-heart "+t+'">'+e.like.length+"</i></div>\n              <div class='item-time'>"+e.time+"</div>\n              <div class='item-user'><a href = '#/user/"+e.username+"'style='cursor: pointer;'>"+e.username+"</a></div>\n            </div>\n        </div>\n      </li><div class='info-fenge'></div>",L.push({index:x,height:E+140*x++,src:e.imgsrc[0]?e.imgsrc[0]:"/failed.jpg",loaded:!1})});var a=document.createElement("div");if(a.innerHTML=o,e&&(document.getElementById("list").innerHTML=null),document.getElementById("list").appendChild(a),0===M||e){r();var l=new f.default.load(page,"loading","bottom");l.mount()}(0===M||e)&&document.getElementsByClassName("info-item")[0]&&(M=document.getElementsByClassName("info-item")[0].clientHeight),c&&(c.fadeIn(),c=null),T=!0,t("yes")})})}Object.defineProperty(t,"__esModule",{value:!0}),t.paper_info=void 0,t.default=function(e,n){if(x=0,M=0,L=[],E=0,T=!0,m.default.testlogin()){var i='\n        <li><a href="#/post">发布</a></li>\n        <li><a href="#/logout">登出</a></li>\n    ';e.innerHTML=i}else{var l='\n        <li><a href="#/register">注册</a></li>\n        <li><a href="#/login">登录</a></li>\n    ';e.innerHTML=l}c=new f.default.load(n,"loading","top");var d="<ul id = 'list' class='info-container'>\n                  </ul>\n  ";n.innerHTML=d,c.mount(),E=a(document.getElementById("list"));var p=m.default.throttling2(o,1e3),g=m.default.debounce(r,500);m.default.addevent(window,"scroll",p),m.default.addevent(window,"scroll",g),s();var v={},b=null,y=function e(n){var i=n.target;if(i.href)""===location.hash||"#/"===location.hash,m.default.removeevent(window,"scroll",p),m.default.removeevent(window,"scroll",g),m.default.removeevent(window,"click",e),_.remove(),t.paper_info=u=i.parentNode.parentNode.parentNode.parentNode;else if("I"===i.tagName&&w.test(i.dataset.index))if(m.default.testlogin()){var o=i.className.split(" "),a=o.indexOf("like");a===-1?(i.className=i.className.replace("unlike","like"),i.innerHTML=Number(i.innerHTML)+1):(i.className=i.className.replace("like","unlike"),i.innerHTML=Number(i.innerHTML)-1);var r=i.dataset.index;v[r]=!v[r],clearTimeout(b),b=setTimeout(function(){for(var e in v)v[e]&&(v[e]=!v[e],console.log("send"),m.default.ajax(JSON.stringify({username:localStorage.username,_id:e}),h.default+"like","post",function(e){}));v={}},2e3)}else alert("尚未登录，请登录"),location.hash="#/login",m.default.removeevent(window,"scroll",p),m.default.removeevent(window,"scroll",g),m.default.removeevent(window,"click",e),_.remove()};m.default.addevent(window,"click",y),_.start()};var u,c,d=n(1),f=i(d),p=n(0),m=i(p),g=n(2),h=i(g),v=n(24),b=(i(v),n(8)),y=i(b),w=/^[a-fA-F0-9]{24}$/,x=0,M=0,T=!0,L=[],E=0,_=new y.default({content:"page",callback:l});t.paper_info=u},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(l.default.testlogin()){var n='\n        <li><a href="#">主页</a></li>\n        <li><a href="#/post">发布</a></li>\n        <li><a href="#/logout">登出</a></li>\n    ';e.innerHTML=n}else{var i='\n        <li><a href="#">主页</a></li>\n        <li><a href="#/register">注册</a></li>\n        <li><a href="#/login">登录</a></li>\n    ';e.innerHTML=i}t.innerHTML=c;var o=document.getElementById("form1"),r=!1;l.default.addevent(o,"submit",function(e){if(e.preventDefault(),!r){r=!0;var t=e.target,n=l.default.html_encode(t.username.value),i=l.default.html_encode(t.password.value);n&&i&&(document.getElementById("success").innerHTML="已提交至服务器，请耐心等待",l.default.ajax(JSON.stringify({username:n,password:i}),u.default+"login","post",function(e){var t=JSON.parse(e);"no username"===t.right?(document.getElementById("userwarn").innerHTML="*用户名不存在",document.getElementById("passwarn").innerHTML="",document.getElementById("success").innerHTML=""):"password wrong"===t.right?(document.getElementById("passwarn").innerHTML="*密码不正确",document.getElementById("userwarn").innerHTML="",document.getElementById("success").innerHTML=""):"yes"===t.right&&(localStorage.sign_in=!0,localStorage.token=t.token,localStorage.username=n,a.default.daojishi(document.getElementById("success"),"登录成功，","s后返回首页")),console.log(e)})),setTimeout(function(){r=!1},4e3)}})};var o=n(1),a=i(o),r=n(0),l=i(r),s=n(2),u=i(s),c="<form id='form1' class='am-form'>\n  <fieldset>\n  <legend>欢迎登录</legend>\n  <label for='username'>用户名：</label><input name='username' type='text' id='username' placeHolder='username'/><span id='userwarn'></span><br>\n  <label for='password'>密&nbsp码：</label><input name = 'password' type='password' id='password' /><span id='passwarn'></span><br>\n  <button type=\"submit\" id='sub' class=\"am-btn am-btn-primary\">Submit</button><br>\n  <span id='success'></span>\n  </fieldset>\n</form>"},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){t.innerHTML=l,localStorage.sign_in=!1,localStorage.token=null,localStorage.username=null,a.default.daojishi(document.getElementById("success"),"登出成功，","s后返回首页")};var o=n(1),a=i(o),r=n(0),l=(i(r),"<h1>logout</h1><span id='success'></span>")},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=new Image;if(n.src="/404.jpg",n.style.width="100%",t.innerHTML=null,t.appendChild(n),a.default.testlogin()){var i='\n        <li><a href="#">主页</a></li>\n        <li><a href="#/post">发布</a></li>\n        <li><a href="#/logout">登出</a></li>\n    ';e.innerHTML=i}else{var o='\n        <li><a href="#">主页</a></li>\n        <li><a href="#/register">注册</a></li>\n        <li><a href="#/login">登录</a></li>\n    ';e.innerHTML=o}};var o=n(0),a=i(o)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),a=i(o),r=n(23),l=(i(r),n(0)),s=i(l),u=n(2),c=i(u),d=function(e,t,n,i){if(s.default.testlogin()){var o='\n        <li><a href="#">主页</a></li>\n        <li><a href="#/post">发布</a></li>\n        <li><a href="#/logout">登出</a></li>\n    ';e.innerHTML=o}else{var r='\n        <li><a href="#">主页</a></li>\n        <li><a href="#/register">注册</a></li>\n        <li><a href="#/login">登录</a></li>\n    ';e.innerHTML=r}if(t.innerHTML=null,n){var l=document.createElement("ul");l.setAttribute("class","info-container"),l.appendChild(n),t.appendChild(l);var u=document.createElement("div");u.style.position="relative",t.appendChild(u);var d=new a.default.load(u,"loading");d.mount(),s.default.ajax(JSON.stringify({_id:i}),c.default+"paper","post",function(e){d.fadeIn(),d=null;var t=JSON.parse(e);u.innerHTML=t.content})}else{var d=new a.default.load(t,"loading");d.mount(),s.default.ajax(JSON.stringify({_id:i}),c.default+"paper","post",function(e){d.fadeIn();var n=JSON.parse(e),i=document.createElement("ul");i.setAttribute("class","info-container");var o="\n      <li class='info-item'>\n        <div class='info-img'>  <img class='img' src ='http://omqetq58r.bkt.gdipper.com/"+n.imgsrc[0]+"' onload='this.style.opacity = 1;'></div>\n        <div class='info-mesg'>\n            <div class='row-1'>\n              <div class='item-title'><a href = '#/paper/"+n._id+"'>"+n.title+"</a></div>\n            </div>\n            <div class='row-2'>\n              <div class='item-time'>"+n.time+"</div>\n              <div class='item-user'>"+n.username+"</div>\n            </div>\n        </div>\n      </li>\n      ",a=document.createElement("div");a.innerHTML=o,i.appendChild(a),t.appendChild(i);var a=document.createElement("div");a.innerHTML=n.content,t.appendChild(a)})}};t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="dazhequan",o="1253553408",a="AKIDW9bBev5vfEtUu9Q3hTJ4g7MXbcT86sxq",r="pSvDMOFuRmvscAWgfVArPp381jFblkX8",l="tj",s=new CosCloud({appid:o,bucket:i,region:l,getAppSign:function(e){var t=this,n=parseInt(Math.random()*Math.pow(2,32)),i=parseInt((new Date).getTime()/1e3),o=i+60,l="",s="a="+t.appid+"&k="+a+"&e="+o+"&t="+i+"&r="+n+"&f="+l+"&b="+t.bucket,u=CryptoJS.HmacSHA1(s,r),c=CryptoJS.enc.Utf8.parse(s),d=u.concat(c),f=d.toString(CryptoJS.enc.Base64);setTimeout(function(){e(f)},1e3)},getAppSignOnce:function(e){var t=this,n=parseInt(Math.random()*Math.pow(2,32)),i=parseInt((new Date).getTime()/1e3),o=0,l=t.path,s="a="+t.appid+"&k="+a+"&e="+o+"&t="+i+"&r="+n+"&f="+l+"&b="+t.bucket,u=CryptoJS.HmacSHA1(s,r),c=CryptoJS.enc.Utf8.parse(s),d=u.concat(c),f=d.toString(CryptoJS.enc.Base64);setTimeout(function(){e(f)},1e3)}});t.default=s,t.bucket=i},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(l.default.testlogin()){var n='\n      <li><a href="#">主页</a></li>\n      <li><a href="#/logout">登出</a></li>\n    ';e.innerHTML=n,t.innerHTML=f;var i=document.getElementById("form3"),o=!1,r=document.getElementById("uploadFile"),s=document.getElementById("imgcontainer"),p=null;a.default.uploadFile(r,function(e){p=e,e.forEach(function(e){s.innerHTML+='<img style="width:100px;height:100px;" src = "'+e+'">'})}),l.default.addevent(i,"submit",function(e){var t=this;e.preventDefault(),o||(this.title.value&&this.info.value?(document.getElementById("success").innerHTML="已提交至服务器，请耐心等待",0!==r.files.length?a.default.tecentcloud(d.default,c.bucket,r.files,function(e){l.default.ajax(JSON.stringify({token:localStorage.token,title:l.default.html_encode(t.title.value),info:l.default.html_encode(t.info.value),img_data:e}),u.default+"post","post",function(e){"yes"===e?a.default.daojishi(document.getElementById("success"),"发布成功，","s后返回首页"):(alert("用户未登陆"),location.hash="#/login")})}):l.default.ajax(JSON.stringify({token:localStorage.token,title:l.default.html_encode(t.title.value),info:l.default.html_encode(t.info.value),img_data:""}),u.default+"post","post",function(e){"yes"===e?a.default.daojishi(document.getElementById("success"),"发布成功，","s后返回首页"):(alert("用户未登陆"),location.hash="#/login")})):(this.title.value||(document.getElementById("title-warn").innerHTML="*标题不能为空"),this.info.value||(document.getElementById("info-warn").innerHTML="*内容不能为空")),setTimeout(function(){o=!1},4e3))})}else{var m='\n      <li><a href="#/register">注册</a></li>\n      <li><a href="#/login">登录</a></li>\n    ';menulist.innerHTML=m,t.innerHTML="<h1>您尚未登录</h1><span id='success'></span>",a.default.daojishi(document.getElementById("success"),"尚未登录，","s后返回首页")}};var o=n(1),a=i(o),r=n(0),l=i(r),s=n(2),u=i(s),c=n(14),d=i(c),f="\n<form id='form3' class='am-form'>\n<fieldset>\n  <label for='title'>标题:</label><input name='title' type='text' id='title' placeHolder='人人乐打折啦'/><span id='title-warn'></span><br>\n  <div class=\"am-form-group\">\n      <label for='info'>内容:</label>\n      <textarea name='info' rows=\"10\" placeHolder='想要发布的具体打折信息'></textarea>\n      <span id='info-warn'></span>\n      <button type=\"submit\" id='sub' class=\"am-btn am-btn-primary right\">发布</button>\n      <span id='success'></span>\n      <input id=\"uploadFile\" type=\"file\" multiple=\"multiple\" accept=\"image/*\">\n      <p id='upload_progress'></p>\n      <div id='imgcontainer'></div>\n    </div>\n  </fieldset>\n</form>\n"},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(a.default.testlogin()){var n='\n        <li><a href="#">主页</a></li>\n        <li><a href="#/post">发布</a></li>\n        <li><a href="#/logout">登出</a></li>\n    ';e.innerHTML=n}else{var i='\n        <li><a href="#">主页</a></li>\n        <li><a href="#/register">注册</a></li>\n        <li><a href="#/login">登录</a></li>\n    ';e.innerHTML=i}t.innerHTML=c;var o=document.getElementById("form0"),r=!1;a.default.addevent(o,"submit",function(e){if(e.preventDefault(),!r){r=!0;var t=e.target,n=a.default.html_encode(t.username.value),i=a.default.html_encode(t.password1.value),o=a.default.html_encode(t.password2.value);n&&i&&o?i===o?(document.getElementById("success").innerHTML="已提交至服务器，请耐心等待",a.default.ajax(JSON.stringify({username:n,password:i}),u.default+"register","post",function(e){var t=JSON.parse(e);console.log(t),"no"===t.right?document.getElementById("userwarn").innerHTML="*用户名已存在":"yes"===t.right&&(localStorage.sign_in=!0,localStorage.username=n,localStorage.token=t.token,l.default.daojishi(document.getElementById("success"),"登录成功，","s后返回首页"))})):document.getElementById("passwarn").innerHTML="*两次密码不一致":(""===n&&(document.getElementById("userwarn").innerHTML="*用户名不能为空"),""!==i&&""!==o||(document.getElementById("passwarn").innerHTML="*密码不能为空")),setTimeout(function(){r=!1},4e3)}})};var o=n(0),a=i(o),r=n(1),l=i(r),s=n(2),u=i(s),c="<form id='form0' class='am-form'>\n  <fieldset>\n  <legend>欢迎注册</legend>\n  <label for='username'>用 户 名：</label><input name='username' type='text' id='username'/><span id='userwarn'></span><br>\n  <label for='password1'>密 &nbsp 码：</label><input name = 'password1' type='password' id='password1'/><br>\n  <label for='password2'>重复密码：</label><input name = 'password2' type='password' id='password2'/><span id='passwarn'></span><br>\n  <button type=\"submit\" id='sub' class=\"am-btn am-btn-primary\">Submit</button><br>\n  <span id='success'></span>\n  </fieldset>\n</form>"},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),a=(i(o),n(0)),r=i(a),l=n(2),s=(i(l),function(e,t,n){if(r.default.testlogin()){var i='\n        <li><a href="#">主页</a></li>\n        <li><a href="#/post">发布</a></li>\n        <li><a href="#/logout">登出</a></li>\n    ';e.innerHTML=i}else{var o='\n        <li><a href="#">主页</a></li>\n        <li><a href="#/register">注册</a></li>\n        <li><a href="#/login">登录</a></li>\n    ';e.innerHTML=o}t.innerHTML="这里是"+n+"的地盘，显示文章的功能还在开发中..."});t.default=s},function(e,t,n){t=e.exports=n(3)(),t.push([e.i,"*{user-select:none}body{min-height:100%;border:0;margin:0}.dropdown{position:absolute;top:51px;right:10%}.dropdown-menu{position:absolute;top:100%;left:0;z-index:1000;display:none;float:left;width:100%;min-width:20px;padding:5px 0;margin:2px 0 0;font-size:14px;text-align:left;list-style:none;background-color:#fff;-webkit-background-clip:padding-box;background-clip:padding-box;border:1px solid #ccc;border:1px solid rgba(0,0,0,.15);border-radius:4px;-webkit-box-shadow:0 6px 12px rgba(0,0,0,.175);box-shadow:0 6px 12px rgba(0,0,0,.175)}.dropdown-menu>li>a{display:block;text-align:center;padding:3px 10px;clear:both;font-weight:400;line-height:1.42857143;color:#333;white-space:nowrap}.dropdown-menu>li>a:focus,.dropdown-menu>li>a:hover{color:#262626;text-decoration:none;background-color:#f5f5f5}.btn{display:inline-block;padding:6px 12px;margin-bottom:0;font-size:14px;font-weight:400;line-height:1.42857143;text-align:center;white-space:nowrap;vertical-align:middle;-ms-touch-action:manipulation;touch-action:manipulation;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-image:none;border:1px solid transparent;border-radius:4px}.btn.active.focus,.btn.active:focus,.btn.focus,.btn:active.focus,.btn:active:focus,.btn:focus{outline:thin dotted;outline:5px auto -webkit-focus-ring-color;outline-offset:-2px}.btn.focus,.btn:focus,.btn:hover{color:#333;text-decoration:none}.btn.active,.btn:active{background-image:none;outline:0;-webkit-box-shadow:inset 0 3px 5px rgba(0,0,0,.125);box-shadow:inset 0 3px 5px rgba(0,0,0,.125)}.appname{font-size:2em}#info-warn,#passwarn,#title-warn,#userwarn{color:red;font-size:5px}form{margin:10px;padding:4px}.left{float:left}.right{float:right}@keyframes hide{0%{opacity:0}2%{opacity:1}25%{opacity:.75}50%{opacity:.5}to{opacity:0}}",""])},function(e,t,n){t=e.exports=n(3)(),t.push([e.i,"#ptr{padding:0;margin:0;display:block;height:40px;border:1px solid #000;border-top:0;border-left:0;border-right:0;text-align:center;line-height:40px;font-size:30px;margin-top:-41px}",""])},function(e,t,n){t=e.exports=n(3)(),t.push([e.i,"",""])},function(e,t,n){t=e.exports=n(3)(),t.push([e.i,".am-btn{cursor:default}.top{top:0}.bottom{bottom:5px}.progress{position:absolute;left:50%;transform:translateX(-50%);opacity:1;transition:opacity 1s ease-in-out}#progress2{display:flex;flex-flow:row nowrap;justify-content:center;padding:0 0 1%}.info-container{width:100%;margin:0;list-style:none;display:flex;flex-flow:column nowrap;padding:0}.info-container .info-fenge{border-top:1px solid #eee;margin:19px 0 20px}.info-container .info-item{display:flex;justify-content:space-between;flex-flow:row nowrap;width:100%;height:100px}.info-container .info-item .info-img{outline:1px solid #0e90d2;width:100px;height:100%;flex-grow:0;flex-shrink:0}.info-container .info-item .info-img .img{width:100px;height:100px;opacity:0;transition:opacity .25s ease-in-out}.info-container .info-item .info-mesg{padding:0 2%;height:100px;display:flex;flex-flow:column nowrap;justify-content:space-between;align-content:space-between;flex:1 1 auto;width:0}.info-container .info-item .info-mesg .row-1{flex:2 1 auto;height:0;flex-flow:row nowrap;justify-content:space-between;align-items:stretch}.info-container .info-item .info-mesg .row-1 .item-title{overflow:hidden;text-overflow:ellipsis;text-overflow:-o-ellipsis-lastline;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.info-container .info-item .info-mesg .row-2{flex:1 1 auto;display:flex;height:0;flex-flow:row nowrap;justify-content:space-between;align-items:center}.info-container .info-item .info-mesg .row-2 .item-user{text-align:right;flex-grow:2;align-items:center}.info-container .info-item .info-mesg .row-2 .item-heart{flex-grow:1;cursor:pointer}.info-container .info-item .info-mesg .row-2 .item-heart .like,.info-container .info-item .info-mesg .row-2 .item-heart i{color:red}.info-container .info-item .info-mesg .row-2 .item-heart .unlike,.info-container .info-item .info-mesg .row-2 .item-heart i{color:grey}.info-container .info-item .info-mesg .row-2 .item-time{flex-grow:1}#imgcontainer{width:100%;height:100px}",""])},function(e,t,n){var i=n(19);"string"==typeof i&&(i=[[e.i,i,""]]);n(4)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(20);"string"==typeof i&&(i=[[e.i,i,""]]);n(4)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(21);"string"==typeof i&&(i=[[e.i,i,""]]);n(4)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var o=n(6),a=(i(o),n(0)),r=i(a),l=n(5),s=i(l);s.default.init(),r.default.addevent(window,"click",function(e){var t=document.getElementsByClassName("dropdown-menu")[0];t.style.display="none"});var u=document.getElementById("menu");r.default.addevent(u,"click",function(e){e.stopPropagation();var t=document.getElementsByClassName("dropdown-menu")[0],n=t.style.display;"block"===n?t.style.display="none":t.style.display="block"})}],[25]);